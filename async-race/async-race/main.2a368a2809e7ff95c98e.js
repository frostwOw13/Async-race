(()=>{"use strict";var e={161:(e,t,n)=>{n.r(t)},905:(e,t,n)=>{n.r(t)},633:(e,t,n)=>{n.r(t)},372:(e,t,n)=>{n.r(t)},887:(e,t,n)=>{n.r(t)},752:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(794),a=n(355),s=n(654),o=n(759),c=n(628),d=n(643);t.App=class{constructor(){this.container=document.body,this.header=new a.Header("header","header"),this.garagePage=new r.Garage("garage"),this.winnersPage=new s.Winners("winners"),this.listener=new d.Listener,this.currentPage=1}init(){return i(this,void 0,void 0,(function*(){this.container.append(this.header.render());const{items:e,count:t}=yield o.Api.getCars(this.currentPage,c.MAX_CARS_ON_PAGE);t&&this.container.append(this.garagePage.render(e,t,this.currentPage)),this.enableRouteChange(),this.listen()}))}renderNewPage(e){return i(this,void 0,void 0,(function*(){if(this.container.innerHTML="",this.container.append(this.header.render()),"garage"===e){const{items:e,count:t}=yield o.Api.getCars(this.currentPage,c.MAX_CARS_ON_PAGE);t&&this.container.append(this.garagePage.render(e,t,this.currentPage))}else"winners"===e&&this.container.append(this.winnersPage.render())}))}renderNewGarage(){return i(this,void 0,void 0,(function*(){const e=document.getElementById("garage"),t=document.querySelector(".garage-view");null==e||e.remove();const{items:n,count:i}=yield o.Api.getCars(this.currentPage,c.MAX_CARS_ON_PAGE);i&&(null==t||t.insertAdjacentHTML("beforeend",r.Garage.renderGarage(n,i,this.currentPage)))}))}enableRouteChange(){window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);this.currentPage=1,this.renderNewPage(e)}))}listen(){window.addEventListener("click",(e=>i(this,void 0,void 0,(function*(){const t=e.target;if("create-submit"===t.id&&d.Listener.createCar(),"btn remove-btn"===t.className&&(d.Listener.removeCar(t,this.currentPage),this.renderNewGarage()),"btn select-btn"===t.className&&d.Listener.selectCar(t).then((()=>this.renderNewGarage())),"btn-engine start-engine-btn"===t.className&&this.listener.startEngine(t),"btn-engine stop-engine-btn"===t.className&&this.listener.stopEngine(t),"race"===t.id&&this.listener.raceAllCars(t,this.currentPage),"reset"===t.id&&this.listener.stopAllCars(t,this.currentPage),"generator"===t.id&&(d.Listener.generateCars(this.currentPage),this.renderNewGarage()),"prev"===t.id&&this.currentPage>1){this.currentPage-=1;const{items:e,count:t}=yield o.Api.getCars(this.currentPage,c.MAX_CARS_ON_PAGE);t&&r.Garage.renderGarage(e,t,this.currentPage),this.winnersPage.renderWinners(this.currentPage,c.MAX_WINNERS_ON_PAGE),this.renderNewGarage()}if("next"===t.id){const{items:e,count:t}=yield o.Api.getCars(this.currentPage,c.MAX_CARS_ON_PAGE);t&&Number(t)/(c.MAX_CARS_ON_PAGE*this.currentPage)>1&&(this.currentPage+=1,e&&(t&&r.Garage.renderGarage(e,t,this.currentPage),this.winnersPage.renderWinners(this.currentPage,c.MAX_WINNERS_ON_PAGE),this.renderNewGarage()))}}))))}}},362:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Animation=void 0;const r=n(759);class a{constructor(){this.animation=0,this.api=new r.Api}startAnimation(e,t,n,s){return i(this,void 0,void 0,(function*(){const i=Math.floor(a.getDistance(e,s)+100);let o=0;const c=n=>{o||(o=n);const r=n-o,a=Math.round(r*(i/t));e.style.transform=`translateX(${Math.min(a,i)}px)`,a<i&&(this.animation=window.requestAnimationFrame(c))};this.animation=window.requestAnimationFrame(c);const{success:d}=yield r.Api.drive(n);return d||cancelAnimationFrame(this.animation),{success:d,id:n,animationTime:t}}))}static getElementPosition(e){const{top:t,left:n,width:i,height:r}=e.getBoundingClientRect();return{x:n+i/2,y:t+r/2}}static getDistance(e,t){const n=a.getElementPosition(e),i=a.getElementPosition(t);return Math.hypot(n.x-i.x+40,n.y-i.y)}}t.Animation=a},334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0,t.Component=class{constructor(e,t){this.container=document.createElement(e),this.container.className=t}render(){return this.container}}},564:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0;const r=n(140),a=n(759);t.Car=class{constructor(){this.api=new a.Api}static addCar(e,t){return i(this,void 0,void 0,(function*(){yield a.Api.createCar({name:e,color:t})}))}static updateCar(e,t){return i(this,void 0,void 0,(function*(){yield a.Api.updateCar(e,t)}))}static deleteCar(e){return i(this,void 0,void 0,(function*(){yield a.Api.deleteCar(e),yield a.Api.deleteWinner(e)}))}static start(e){return i(this,void 0,void 0,(function*(){const t=yield a.Api.startEngine(e);return Math.round(t.distance/t.velocity)}))}static stop(e){return i(this,void 0,void 0,(function*(){yield a.Api.stopEngine(e)}))}static messageWinner(e,t){return i(this,void 0,void 0,(function*(){new r.Message("winner").render(e.name,t)}))}}},140:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0,n(161),t.Message=class{constructor(e){this.container=document.createElement("div"),this.container.className=e}render(e,t){this.container.innerHTML=`\n      <p class='winner-title'>The ${e} is winner with ${(t/1e3).toFixed(2)}s</p>\n    `,this.container.classList.add("active"),document.body.appendChild(this.container)}}},794:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0,n(905);class i{constructor(e){this.container=document.createElement("div"),this.container.className=e}static renderGarage(e,t,n){return`\n      <div id='garage'>\n        <h1 class='garage-title'>Garage (${t})</h1>\n        <h2 class='garage-title'>Page #${n}</h2>\n        <ul class='garage-cars'>\n          ${e.map((e=>`\n            <li class="garage__item">${i.renderCar(e)}</li>\n          `)).join("")}\n        </ul>\n      </div>\n    `}static renderCarImage(e){return`\n      <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      width="120px" height="45px" viewBox="50 50 494.111 260" style="enable-background:new 0 0 494.111 494.111;"\n      xml:space="preserve">\n        <g>\n          <g style="fill:${e}">\n            <path d="M478.805,289.625l-1.787-11.565l-0.729-0.854c-39.942-46.729-75.231-49.125-88.508-50.028\n              c-1.318-0.092-2.789-0.188-3.526-0.305c-5.903-4.679-29.575-9.914-35.142-9.914c-0.016,0-0.024,0-0.04,0\n              c-1.88,0.126-3.903,0.753-6.027,1.412c-4.496,1.397-10.095,2.683-14.627,0.579c-9.666-4.48-30.978-4.614-33.378-4.614\n              l-20.738,5.063c-17.29-6.264-47.346-20.021-55.804-23.918v-8.157l-1.811-1.154c-3.635-2.309-7.418-3.48-11.267-3.48\n              c-8.854,0-15.408,6.201-18.149,9.329c-7.881-0.19-36.542,0.339-63.776,17.711c-18.698,11.94-26.158,15.244-28.812,16.164\n              l-0.269-0.357l-0.248,0.072l-2.883-3.17c4.807-1.487,8.323-5.915,8.323-11.205v-6.869c0-6.494-5.284-11.775-11.776-11.775H65.253\n              c-3.857,0-7.253,1.894-9.408,4.757c-1.575-2.164-4.496-4.27-10.219-4.27c-4.35,0-8.871-0.102-13.259-0.195\n              c-4.209-0.096-8.299-0.188-12.002-0.188c-9.077,0-20.366,0-20.366,7.251v50.407l25.026,6.188v-5.021\n              c0-18.971,19.61-23.429,20.444-23.618l1.453-0.314l0.877-1.176c0.509-0.683,1.491-2.065,2.607-3.791l4.771,14.084l-27.042,7.7\n              l4.53,42.718l2.234,0.865c1.495,0.577,22.792,8.772,43.527,15.4c-1.653-1.715-3.144-3.57-4.454-5.57\n              c-1.05-1.603-1.956-3.306-2.755-5.062c-2.198-4.829-3.5-10.143-3.5-15.785c0-21.099,17.168-38.267,38.271-38.267\n              c21.101,0,38.269,17.168,38.269,38.267c0,10.167-4.052,19.364-10.54,26.233c-1.415,1.49-2.972,2.809-4.604,4.055\n              c-2.1,1.611-4.346,3.014-6.759,4.164c32.759-1.295,167.665-3.471,240.792-4.521c0.561-0.008,1.242-0.016,1.879-0.016\n              c-1.519-1.206-2.973-2.453-4.3-3.871c-1.142-1.223-2.224-2.509-3.206-3.88c-4.484-6.264-7.181-13.886-7.181-22.165\n              c0-21.099,17.172-38.267,38.271-38.267c21.096,0,38.271,17.168,38.271,38.267c0,8.479-2.854,16.246-7.538,22.586\n              c-0.998,1.362-2.04,2.681-3.21,3.896c-1.367,1.418-2.901,2.665-4.465,3.863c15.657,0.2,32.14,0.396,45.801,0.396\n              c16.375,0,25.772-0.276,29.539-0.85c4.408-0.673,6.785-2.492,7.062-5.39C494.238,299.54,494.602,295.601,478.805,289.625z"/>\n            <path style="fill:#222" d="M107.537,307.238c4.599-0.232,8.893-1.503,12.738-3.583c9.548-5.13,16.126-15.1,16.126-26.686\n              c0-16.774-13.644-30.42-30.421-30.42c-16.777,0-30.42,13.646-30.42,30.42c0,7.515,2.839,14.307,7.363,19.625\n              c2.166,2.54,4.711,4.716,7.598,6.432c4.544,2.709,9.791,4.364,15.458,4.364C106.513,307.406,107.008,307.266,107.537,307.238z"/>\n            <path style="fill:#222" d="M388.594,307.406c1.118,0,2.191-0.217,3.282-0.337c4.231-0.46,8.171-1.755,11.697-3.774\n              c1.916-1.103,3.719-2.377,5.358-3.855c6.146-5.566,10.082-13.529,10.082-22.453c0-16.783-13.645-30.421-30.42-30.421\n              s-30.421,13.638-30.421,30.421c0,8.691,3.711,16.498,9.582,22.049c1.595,1.502,3.374,2.805,5.262,3.939\n              c3.435,2.071,7.281,3.434,11.421,4.011C385.817,307.166,387.167,307.406,388.594,307.406z"/>\n          </g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n        <g>\n        </g>\n      </svg>\n    `}static renderCar({id:e,name:t,color:n,isEngineStarted:r}){return`\n      <div class='general-buttons'>\n        <button class='btn select-btn' id='select-car-${e}'>Select</button>\n        <button class='btn remove-btn' id='remove-car-${e}'>Remove</button>\n        <span class='car-name'>${t}</span>\n      </div>\n      <div class='road'>\n        <div class='launch-pad'>\n          <div class='control-panel'>\n            <button class='btn-engine start-engine-btn' id='start-engine-car-${e}${r?"disabled":""}'>A</button>\n            <button disabled class='btn-engine stop-engine-btn' id='stop-engine-car-${e}${r?"disabled":""}'>B</button>\n          </div>\n          <div class='car' id='car-${e}'>\n            ${i.renderCarImage(n)}\n          </div>\n        </div>\n        <div class='finish' id='finish-${e}'>🏁</div>\n      </div>\n    `}render(e,t,n){const r=`\n      <div class='garage-view'>\n        <div class='garage-forms'>\n          <form class='form' id='create'>\n            <input class='input' id='create-name' name='name' type='text'>\n            <input class='color' id='create-color' name='color' type='color' value='#FFFFFF'>\n            <button class='btn' id='create-submit'>Create</button>\n          </form>\n          <form class='form' id='update'>\n            <input disabled class='input' id='update-name' name='name' type='text'>\n            <input disabled class='color' id='update-color' name='color' type='color' value='#FFFFFF'>\n            <button disabled class='btn' id='update-submit' href='#'>Update</button>\n          </form>\n        </div>\n        <div class='race-control'>\n          <button class='btn race-button' id='race'>Race</button>\n          <button class='btn reset-button' id='reset'>Reset</button>\n          <button class='btn generator-button' id='generator'>Generate cars</button>\n        </div>\n        ${i.renderGarage(e,t,n)}\n      </div>\n      <div class='pagination'>\n        <button class='btn garage-btn' id='prev'>Previous</button>\n        <button class='btn garage-btn' id='next'>Next</button>\n      </div>\n    `;return this.container.innerHTML=r,this.container}}t.Garage=i},355:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=n(628),r=n(334);n(633);class a extends r.Component{renderPageButtons(){this.container.innerHTML="";const e=document.createElement("div");e.className="header-panel",i.buttons.forEach((t=>{const n=document.createElement("a");n.href=`#${t.id}`,n.innerText=t.text,n.className="button",e.append(n)})),this.container.append(e)}render(){return this.renderPageButtons(),this.container}}t.Header=a},654:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0;const r=n(794),a=n(759),s=n(628);n(372),t.Winners=class{constructor(e){this.container=document.createElement("div"),this.container.className=e}renderWinners(e,t){return i(this,void 0,void 0,(function*(){const{items:n,count:i}=yield a.Api.getWinners({page:e,limit:t}),s=`\n      <h1 class='winners-title'>Winners (${i})</h1>\n      <h2 class='winners-title'>Page #${e}</h2>\n      <table class='table' cellspacing='0' border='0' cellpadding='0'>\n        <thead>\n          <th>Number</th>\n          <th>Car</th>\n          <th>Name</th>\n          <th>Wins</th>\n          <th>Best time (seconds)</th>\n        </thead>\n        <tbody>\n          ${n.map(((t,n)=>`\n            <tr>\n              <td>${1===e?"":e-1}${n+1}</td>\n              <td>${r.Garage.renderCarImage(t.car.color)}</td>\n              <td>${t.car.name}</td>\n              <td>${t.wins}</td>\n              <td>${t.time}</td>\n            </tr>\n            `)).join("")}\n        </tbody>\n      </table>\n      <div class='pagination'>\n        <button class='btn winners-btn' id='prev'>Previous</button>\n        <button class='btn winners-btn' id='next'>Next</button>\n      </div>\n    `;this.container.innerHTML=s}))}render(){return this.renderWinners(1,s.MAX_WINNERS_ON_PAGE),this.container}}},759:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0;const r=n(628);class a{static getWinners({page:e,limit:t=10}){return i(this,void 0,void 0,(function*(){const n=yield fetch(`${r.winners}?_page=${e}&_limit=${t}&_sort=time`),s=yield n.json();return{items:yield Promise.all(s.map((e=>i(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{car:yield a.getCar(String(e.id))})}))))),count:n.headers.get("X-Total-Count")}}))}static getCars(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(`${r.garage}?_page=${e}&_limit=${t}`);return{items:yield n.json(),count:n.headers.get("X-Total-Count")}}))}static getCar(e){return i(this,void 0,void 0,(function*(){return yield(yield fetch(`${r.garage}/${e}`)).json()}))}static createCar(e){return i(this,void 0,void 0,(function*(){return(yield fetch(r.garage,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()}))}static deleteCar(e){return i(this,void 0,void 0,(function*(){(yield fetch(`${r.garage}/${e}`,{method:"DELETE"})).json()}))}static updateCar(e,t){return i(this,void 0,void 0,(function*(){(yield fetch(`${r.garage}/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}))}static startEngine(e){return i(this,void 0,void 0,(function*(){return(yield fetch(`${r.engine}?id=${e}&status=started`)).json()}))}static stopEngine(e){return i(this,void 0,void 0,(function*(){(yield fetch(`${r.engine}?id=${e}&status=stopped`)).json()}))}static drive(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(`${r.engine}?id=${e}&status=drive`).catch();return 200!==t.status?{success:!1}:Object.assign({},yield t.json())}))}static getWinner(e){return i(this,void 0,void 0,(function*(){return(yield fetch(`${r.winners}/${e}`)).json()}))}static deleteWinner(e){return i(this,void 0,void 0,(function*(){(yield fetch(`${r.winners}/${e}`,{method:"DELETE"})).json()}))}static saveWinner({id:e,time:t}){return i(this,void 0,void 0,(function*(){if(404===(yield a.getWinnersStatus(e)))yield a.createWinner({id:e,wins:1,time:t});else{const n=yield a.getWinner(e);yield a.updateWinner(e,{id:e,wins:n.wins+1,time:t<n.time?t:n.time})}}))}static getWinnersStatus(e){return i(this,void 0,void 0,(function*(){return(yield fetch(`${r.winners}/${e}`)).status}))}static createWinner(e){return i(this,void 0,void 0,(function*(){(yield fetch(r.winners,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()}))}static updateWinner(e,t){return i(this,void 0,void 0,(function*(){(yield fetch(`${r.winners}/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}))}}t.Api=a},628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.carModels=t.carBrands=t.randomColor=t.buttons=t.engine=t.winners=t.garage=t.AMOUNT_OF_CARS_FROM_GENERATOR=t.MAX_WINNERS_ON_PAGE=t.MAX_CARS_ON_PAGE=void 0,t.MAX_CARS_ON_PAGE=7,t.MAX_WINNERS_ON_PAGE=10,t.AMOUNT_OF_CARS_FROM_GENERATOR=100,t.garage="http://127.0.0.1:3000/garage",t.winners="http://127.0.0.1:3000/winners",t.engine="http://127.0.0.1:3000/engine",t.buttons=[{id:"garage",text:"to garage"},{id:"winners",text:"to winners"}],t.randomColor="0123456789abcdef",t.carBrands=["Lada","Kia","Hyundai","Renault","Toyota","VW","Skoda","Nissan","BMW","Mercedes","Mazda","Mitsubishi","Lexus","Datsun","Haval","Audi","Geely","Suzuki","Chery","Volvo","Porsche","Subaru","Peugeot","Citroen","MINI","Honda","FAW"],t.carModels=["Rio","Granta","Vesta","Solaris","Creta","Polo","Daster","Largus","Xray","Rav 4","Niva","Captur","Logan","Sandero","Rapid","Camry","Tiguan","Sportage","Octavia"]},643:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Listener=void 0;const r=n(362),a=n(564),s=n(794),o=n(759),c=n(628);class d{constructor(){this.animation=new r.Animation}static updateCarListener(e){return new Promise((t=>{const n=document.getElementById("update");null==n||n.addEventListener("submit",(n=>i(this,void 0,void 0,(function*(){n.preventDefault();const i=document.getElementById("update-name"),r=document.getElementById("update-color"),s=yield o.Api.getCar(e),c={name:i.value?i.value:s.name,color:r.value};t(a.Car.updateCar(e,c))}))))}))}static createCar(){const e=document.getElementById("create-name"),t=document.getElementById("create-color"),n=e.value,i=t.value;n&&i&&a.Car.addCar(n,i)}static removeCar(e,t){return i(this,void 0,void 0,(function*(){const n=e.id.split("-")[2];a.Car.deleteCar(n);const{items:i,count:r}=yield o.Api.getCars(t,c.MAX_CARS_ON_PAGE);r&&s.Garage.renderGarage(i,r,t)}))}static selectCar(e){return new Promise((t=>{const n=document.getElementById("update-name"),i=document.getElementById("update-color"),r=document.getElementById("update-submit");n.disabled=!1,i.disabled=!1,r.disabled=!1;const a=e.id.split("-")[2];t(d.updateCarListener(a).then((()=>{n.value="",i.value="#ffffff",n.disabled=!0,i.disabled=!0,r.disabled=!0})))}))}startEngine(e){return i(this,void 0,void 0,(function*(){const t=e.id.split("-")[3],n=document.getElementById(`stop-engine-car-${t}`),i=yield a.Car.start(t),r=document.getElementById(`car-${t}`),s=document.getElementById(`finish-${t}`);e.disabled=!0,n.disabled=!1,r&&s&&this.animation.startAnimation(r,i,t,s)}))}stopEngine(e){return i(this,void 0,void 0,(function*(){const t=e.id.split("-")[3],n=document.getElementById(`start-engine-car-${t}`),i=document.getElementById(`car-${t}`);e.disabled=!0,n.disabled=!1,a.Car.stop(t),i&&(i.style.transform="translateX(0)"),this.animation.animation&&window.cancelAnimationFrame(this.animation.animation)}))}raceAllCars(e,t){return i(this,void 0,void 0,(function*(){const n=document.getElementById("reset");let r,s=!1;e.disabled=!0,n.disabled=!1;const{items:d}=yield o.Api.getCars(t,c.MAX_CARS_ON_PAGE);d.forEach((e=>i(this,void 0,void 0,(function*(){const t=document.getElementById(`car-${e.id}`),n=document.getElementById(`finish-${e.id}`),i=yield a.Car.start(e.id.toString());if(t&&n&&(r=yield this.animation.startAnimation(t,i,e.id.toString(),n),(null==r?void 0:r.success)&&!s)){s=!0;const e=yield o.Api.getCar(String(r.id));a.Car.messageWinner(e,Number(r.animationTime));const t=Number(r.id),n=Number((Number(r.animationTime)/1e3).toFixed(2));o.Api.saveWinner({id:t,time:n})}}))))}))}stopAllCars(e,t){return i(this,void 0,void 0,(function*(){const n=document.getElementById("race"),i=document.querySelector(".winner");null==i||i.remove(),e.disabled=!0,n.disabled=!1;const{items:r}=yield o.Api.getCars(t,c.MAX_CARS_ON_PAGE);r.forEach((e=>{const t=document.getElementById(`car-${e.id}`);a.Car.stop(e.id.toString()),t&&(t.style.transform="translateX(0)"),this.animation.animation&&window.cancelAnimationFrame(this.animation.animation)}))}))}static generateCars(e){return i(this,void 0,void 0,(function*(){let t=0;for(;t<c.AMOUNT_OF_CARS_FROM_GENERATOR;){t++;const e=`${c.carBrands[Math.floor(Math.random()*c.carBrands.length)]} ${c.carModels[Math.floor(Math.random()*c.carModels.length)]}`;let n="#";for(let e=0;e<6;e++)n+=c.randomColor.split("")[Math.floor(Math.random()*c.randomColor.length)];e&&n&&a.Car.addCar(e,n)}const{items:n,count:i}=yield o.Api.getCars(e,c.MAX_CARS_ON_PAGE);i&&s.Garage.renderGarage(n,i,e)}))}}t.Listener=d}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(752);n(887),(new e.App).init()})()})();